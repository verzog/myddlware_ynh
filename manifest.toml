packaging_format = 2

id = "myddlware"
name = "Myddleware"

version = "1.0.0~ynh1"
upstream.version = "4.0.8"

maintainers = ["verzog"]

[description]
en = "Open-source middleware to connect and sync data across business applications"
fr = "Middleware libre pour connecter et synchroniser des donnÃ©es entre applications"

[upstream]
license = "AGPL-3.0-or-later"
website = "https://www.myddleware.com/"
admindoc = "https://github.com/Myddleware/myddleware/wiki"
userdoc = "https://github.com/Myddleware/myddleware/wiki"
code = "https://github.com/Myddleware/myddleware"

[integration]
yunohost = ">= 11.2"
architectures = ["amd64", "armhf", "arm64"]
multi_instance = true
ldap = "not_relevant"
sso = "false"
dns = "automatic"
ram.build = "256M"
ram.runtime = "512M"
disk = "1200M"

[requirements]
yunohost = ">= 11.2"
php = ">= 8.2"
mysql = true
composer = true

[arguments]
  [arguments.install]
    [arguments.install.domain]
    type = "domain"
    ask = "Select the domain where Myddleware will be installed"

    [arguments.install.path]
    type = "path"
    ask = "Select the path where Myddleware will be installed"
    default = "/myddlware"

    [arguments.install.admin]
    type = "string"
    ask = "Administrator email for Myddleware"

    [arguments.install.is_public]
    type = "boolean"
    ask = "Should Myddleware be accessible to the public?"
    default = true

[resources]
    [resources.sources]
        [resources.sources.main]
        url = "https://github.com/Myddleware/myddleware/archive/refs/heads/main.zip"
        sha256 = "dbf5c063352484838a008f8f4027458e5cd8c86e82cf805cb0fd49ba41d6767b"

    [resources.system_user]
    # Created during install

    [resources.install_dir]
    path = "/var/www/myddlware"

    [resources.permissions]
      [resources.permissions.main]
      url = "/"
      allowed = "visitors"
