packaging_format = 2

id = "myddleware"
name = "Myddleware"
description.en = "Open-source data integration and migration platform."
version = "4.2.2~ynh1"
maintainers = ["your-github-handle"]

[upstream]
license = "GPL-3.0-only"
website = "https://www.myddleware.com/"
code = "https://github.com/Myddleware/myddleware"
admindoc = "https://myddleware.github.io/myddleware-docs/"
userdoc = "https://myddleware.github.io/myddleware-docs/"

[integration]
yunohost = ">= 11.1"
helpers_version = "2.1"
architectures = "all"
multi_instance = false
ldap = "not_relevant"
sso = "not_relevant"
disk = "2G"
ram.build = "1G"
ram.runtime = "512M"

[install]
  [install.domain]
  type = "domain"

  [install.path]
  type = "path"
  default = "/myddleware"

  [install.init_main_permission]
  type = "group"
  default = "all_users"

[resources]

  [resources.sources]
    [resources.sources.main]
    # Latest release at time of packaging (2025-11-24)
    url = "https://github.com/Myddleware/myddleware/archive/refs/tags/v4.2.2.tar.gz"
    # TODO: replace with the real checksum from `sha256sum v4.2.2.tar.gz`
    sha256 = "CHANGE_ME"

  [resources.system_user]

  [resources.install_dir]

  [resources.data_dir]

  [resources.permissions]
  main.url = "/"
  main.allowed = "visitors"

  [resources.apt]
  # PHP 8.4 + MySQL/MariaDB + Node/Yarn + build toolchain
  packages = [
    "php8.4",
    "php8.4-cli",
    "php8.4-fpm",
    "php8.4-mysql",
    "php8.4-xml",
    "php8.4-mbstring",
    "php8.4-intl",
    "php8.4-zip",
    "php8.4-curl",
    "php8.4-gd",
    "unzip",
    "git",
    "mariadb-server",
    "nodejs",
    "npm",
    "yarnpkg",
    "build-essential"
  ]
